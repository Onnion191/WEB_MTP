<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WindowAddon Documentation: Windows Installation Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="inline_params.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WindowAddon Documentation
   &#160;<span id="projectnumber">Stable 1.1</span>
   </div>
   <div id="projectbrief">WindowAddon is a simple light-weight C++ library based on Allegro to get started in computer graphics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('windows_installation.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Windows Installation Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page will teach you how to <b>install</b> the <a class="el" href="class_window.html" title="Mid-level interface class that allows you to access all the functionalities of the library...">Window</a> Add-on and all the extra libraries and files that it needs to run properly. If you want to <b>update</b> your current installation you can follow this exact same guide but deleting all old installation files first.</p>
<h1><a class="anchor" id="install_allegro_windows"></a>
Installing Allegro</h1>
<p>Allegro is the core library used to bring to life the <a class="el" href="class_window.html" title="Mid-level interface class that allows you to access all the functionalities of the library...">Window</a> Add-on. You have to install it first in order to get all working. If you're updating <a class="el" href="class_window.html" title="Mid-level interface class that allows you to access all the functionalities of the library...">Window</a> Add-on, you only have to update Allegro if your binaries are compiled with a different version of Allegro than the one you have installed. If you're compiling Window-Addon from source code, this step is optional. <br />
<br />
 To install it, you can: </p><ul>
<li>
<b>Recommended</b>: Download pre-compiled binaries from <a class="el" href="downloads.html#windows_downloads">Windows Downloads</a> and copy the downloaded content into the root of your MinGW installation. <div class="image">
<img src="mingw_files.png" alt="mingw_files.png"/>
</div>
  <br />
 </li>
<li>
Compile latest Allegro from source code. The Allegro documentation has a nice tutorial on how to do it. You can find it <a href="https://wiki.allegro.cc/index.php?title=Install_Allegro5_From_Git/Windows">here</a>. You'll want to compile the <b><em>Monolith debug</em></b> version. <b>Recommendation</b>: You'll need to use <em>MSYS</em> to download and install some dependences, but the MinGW installation bundled with Code::Blocks doesn't have it by default. I recommend you to download a clean MinGW install from <a href="https://sourceforge.net/projects/mingw/files/">MinGW project</a> that contains <em>MSYS</em> and copy <em>msys</em> folder to your Code::Blocks MinGW installation. Make sure you select <em>MSYS</em> option in the auto-installer. It is important that you use the MinGW bundled with Code::Blocks to compile Allegro. </li>
</ul>
<h1><a class="anchor" id="install_window_addon"></a>
Installing Window Add-on</h1>
<p>Once we have Allegro installed, we can continue installing the Add-on. As with Allegro, you can: </p><ul>
<li>
Download pre-compiled binaries at <a class="el" href="downloads.html#windows_downloads">Windows Downloads</a>. Make sure that you have the same GCC and Allegro versions. </li>
<li>
Compile binaries from source code by yourself. You can check how to do it below. </li>
</ul>
<h2><a class="anchor" id="compile_windowaddon_windows"></a>
Compiling Window Add-on binaries from source code for Windows</h2>
<p><b>Prerequisites</b>: Allegro 5.2 (recommended version: 5.2.4) must be installed on your MinGW installation. <br />
<br />
 The objective of this tutorial is to teach you how to create both <em>windowAddon.dll</em> and <em>windowAddon.a</em> files needed to install the add-on into your MinGW installation. We will be using <a href="http://www.codeblocks.org/">Code::Blocks</a> to generate them. <br />
<br />
 Follow these steps in order to compile them from the source code: </p><ol>
<li>
<p class="startli">Download the source code from the <a href="https://github.com/EnricRG/PID-UdG">GitHub repository</a>. The source code is located inside <em>src</em> folder. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Make sure that you set Code::Blocks MinGW path to be the MinGW installation where you want to install the <a class="el" href="class_window.html" title="Mid-level interface class that allows you to access all the functionalities of the library...">Window</a> Add-on. Go to <em>Settings &rarr; Compiler &rarr; Toolchain executables</em> to check that out. </p><div class="image">
<img src="toolchain_executables.png" alt="toolchain_executables.png"/>
</div>
 <p class="endli"></p>
</li>
<li>
<p class="startli">Go to <em>File &rarr; New &rarr; Project</em> and create a <em>Dynamic Link Library</em> Project. Name it "WindowAddon". If you don't name it like this, you'll have to modify the name of the final compiled files. </p><div class="image">
<img src="dll_project.png" alt="dll_project.png"/>
</div>
 <p class="endli"></p>
</li>
<li>
<p class="startli">Make a copy of the <a class="el" href="class_window.html" title="Mid-level interface class that allows you to access all the functionalities of the library...">Window</a> Add-on sources into the root of this new project and put it in a directory called <em>windowAddon</em>. You can not choose this name, make sure you type it right. </p><div class="image">
<img src="windows_windowaddon_copysource.png" alt="windows_windowaddon_copysource.png"/>
</div>
 <p class="endli"></p>
</li>
<li>
<p class="startli">Replace your main.h and main.cpp with these samples: <br />
<br />
 <em>main.h</em> </p><div class="fragment"><div class="line"><span class="comment">// Version 1.1</span></div><div class="line"></div><div class="line"><span class="preprocessor">#ifndef __WINDOWADDON_H__</span></div><div class="line"><span class="preprocessor">#define __WINDOWADDON_H__</span></div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef _WIN32 //Windows 32 and 64 bits</span></div><div class="line"><span class="preprocessor">    #include &lt;windows.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">    #ifdef BUILD_DLL</span></div><div class="line"><span class="preprocessor">        #define DLL_EXPORT __declspec(dllexport)</span></div><div class="line"><span class="preprocessor">    #else</span></div><div class="line"><span class="preprocessor">        #define DLL_EXPORT __declspec(dllimport)</span></div><div class="line"><span class="preprocessor">    #endif</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;windowAddon/Window.h&quot;</span> <span class="comment">//Window Add-on main header file</span></div><div class="line"><span class="preprocessor">#include &quot;windowAddon/Drawables.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#endif // __WINDOWADDON_H__</span></div></div><!-- fragment --><p> <em>main.cpp</em> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;main.h&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> DLL_EXPORT BOOL APIENTRY DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (fdwReason)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span> DLL_PROCESS_ATTACH:</div><div class="line">            <span class="comment">// attach to process</span></div><div class="line">            <span class="comment">// return FALSE to fail DLL load</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> DLL_PROCESS_DETACH:</div><div class="line">            <span class="comment">// detach from process</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> DLL_THREAD_ATTACH:</div><div class="line">            <span class="comment">// attach to thread</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> DLL_THREAD_DETACH:</div><div class="line">            <span class="comment">// detach from thread</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> TRUE; <span class="comment">// succesful</span></div><div class="line">}</div></div><!-- fragment --><p> <br />
 In more detail: First of all, you have to include the headers that you want to be accessible when using the library. You also have to delete the sample function that Code::Blocks creates with the project. The provided samples are the ones intended to be used, but feel free to modify anything you want in order to fit your needs. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Compile the project. Make sure you have selected the <em><b>Release</b></em> build option and click <em><b>Rebuild</b></em> to compile it from zero (to ensure you are not using some intermediate files that have been created during a possible test compile). You'll see some warnings coming from <em><a class="el" href="_common_utils_8h_source.html">CommonUtils.h</a></em> and <em><a class="el" href="_event_8h_source.html">Event.h</a></em>, but this is fine. </p>
<p class="endli"></p>
</li>
<li>
Now you should see three files inside <em>bin/Release</em> directory of the project named <em>windowAddon.a, windowAddon.dll and windowAddon.def</em>. We're interested in the first two. <div class="image">
<img src="bin_release.png" alt="bin_release.png"/>
</div>
 Create a directory somewhere to throw all the installation files in. Then create a folder named <em>bin</em> inside your installation files folder and put <em>windowAddon.dll</em> in it. Do the same with <em>windowAddon.a</em> but in a folder called <em>lib</em>. You can download <em>include</em> folder at <a class="el" href="downloads.html#windows_downloads">Windows Downloads</a>. Now your installation files folder should look like that: <div class="image">
<img src="installation_files.png" alt="installation_files.png"/>
</div>
  <br />
</li>
</ol>
<p>And that's it, you have created the installation files successfully. Now you can continue to the next section to finish your installation process. <br />
<br />
 <b>NOTE</b>: If you update your MinGW installation (more precisely GCC) you'll have to recompile the Add-on again.</p>
<h2><a class="anchor" id="install_windows_files"></a>
Install the files</h2>
<p>Whether you have downloaded or compiled the files, now what you have to do is to install them on your MinGW setup. It's as simple as <b>drag and drop</b> these files into MinGW's root directory. This process should not override any file, so if a window pops up warning that you'll are going to do that is because you had an older installation of Allegro or <a class="el" href="class_window.html" title="Mid-level interface class that allows you to access all the functionalities of the library...">Window</a> Add-on and you should delete those files first. </p><div class="image">
<img src="mingw_files.png" alt="mingw_files.png"/>
</div>
<h1><a class="anchor" id="windows_codeblocks"></a>
How to use the Window Add-on in your Code::Blocks project</h1>
<p>And how do you use both Allegro and the add-on? First what you have to do is to say to your compiler how to link to these libraries. This can be done by going to <em>Settings &rarr; Compiler &rarr; Linker Settings</em> and adding the flags <em>-lallegro_monolith-debug</em> and <em>-lWindowAddon</em>. </p><div class="image">
<img src="linker_settings.png" alt="linker_settings.png"/>
</div>
<p>And now you can start including the library and compile your own projects with it. Have fun. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="installation_guides.html">How to install the Window Add-on</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
